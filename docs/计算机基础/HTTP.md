# HTTP 协议

### HTTP 方法的具体作用？

常用的方法有以下几种：GET、POST、PATCH、PUT、DELETE。

GET：获取数据

POST：新建提交数据

PATCH / PUT：更新数据

DELETE：删除数据

## GET 和 POST 的区别？:star2:

- 从缓存的角度：
  - GET 请求会被浏览器主动缓存，留下历史记录。
  - POST 请求不会主动缓存。
- 从编码的角度：
  - GET 只能进行 URL 编码，只能接收 ASCII 字符。
  - POST 不受编码限制。
- 从参数的角度：
  - GET 一般放在 URL 中，因此不安全，同时长度会受到各方面限制。
  - POST 是放在请求体中，更适合传输敏感信息，同时理论上长度不受限制。
- 从幂等性的角度：
  - GET 请求是幂等的（幂等表示相同操作，结果也是相同的）
  - POST 请求不是幂等的。
- 从 TCP 的角度：
  - GET 请求会把请求报文一次发送过去。
  - POST 请求会分为两个 TCP 包，首先发送 header 部分，如果服务器有响应，再发送 body 部分。

### PUT 和 POST 都是新增资源，有什么区别？

POST 请求非幂等、PUT 请求具有幂等性。

### PUT 和 PATCH 都是修改资源，有什么区别？

- PATCH 请求非幂等、PUT 请求具有幂等性。
- PATCH 是局部更新资源，PUT 请求需要提供完整的资源对象。

### HTTP 请求报文格式？

请求行、请求头、空行、请求体。

### HTTP 响应报文格式？

响应行、响应头、空行、响应体。

### HTTP header（首部） 有哪些？:star2:

- 常见的 Request Headers：
  - Accept：浏览器可接收的数据格式。
  - Accept-Encoding：浏览器可接收的压缩算法，如 gzip。
  - Accept-Language：浏览器可接收的语言。
  - Connection：keep-alive 一次 TCP 连接重复使用。
  - Cookie：浏览器会自己带。
  - Host：请求的域名。
  - User-Agent：浏览器信息。
  - Content-type：发送的数据格式，如 application/json。
- 常见的 Response Headers：
  - Content-type：返回的数据格式，如 text/html。
  - Content-length：返回的数据大小。
  - Content-Encoding：返回数据的压缩算法，如 gzip。
  - Set-Cookie：服务端设置 Cookie。
- 缓存相关的 headers：
  - Cache-Control：服务器对资源进行强制缓存，控制缓存过期，属于 Response Header。
    - max-age：过期时间，单位为秒。
    - no-cache：不使用本地的强制缓存。
    - no-store：不使用本地的强制缓存，同时不使用服务端的其他缓存措施。
  - Expires：根据绝对时间控制缓存过期，但因为客户端和服务端存在时间偏差，所以已经被代替了，属于 Response Header。
  - Last-Modified：资源的最后修改时间，协商缓存是服务器返回给客户端的资源标识，属于 Response Header。
  - If-Modified-Since：资源的最后修改时间，协商缓存是客户端请求带给服务端的资源标识，属于 Request Header。
  - Etag：资源的唯一标识，协商缓存是服务器返回给客户端的资源标识，属于 Response Header。
  - If-None-Match：资源的唯一标识，协商缓存是客户端请求带给服务端的资源标识，属于 Request Header。

### HTTP 状态码有哪些？:star2:

- 1XX：服务器收到请求
- 2XX：请求成功
  - 200：OK 成功
  - 204：No Content 与200一致，但响应头后没有 body 数据。
  - 206：Partial Content 表示请求部分内容，多用于分快下载或者断点续传。
- 3XX：重定向
  - 301：永久重定向（域名到期可以使用，浏览器会记住，下次访问本域名是直接重定向到返回的 location 的地址）
  - 302：临时重定向（只是本次会重定向）
  - 304：资源未被修改，协商缓存触发（资源在本地还有效，可以使用缓存）
- 4XX：客户端错误
  - 400：请求存在语法错误或缺少参数。
  - 403：服务器禁止访问，没有权限。
  - 404：资源未找到。
- 5XX：服务端错误
  - 500：服务器错误，宕机或者有 bug
  - 504：网关超时

### 同样是重定向，301、302、303、307的区别？

301：永久重定向（域名到期可以使用，浏览器会记住，下次访问本域名是直接重定向到返回的 location 的地址）

302：临时重定向（只是本次会重定向）

303：查看其他位置，请求者应该对不同的位置使用单独的请求来获取响应。

307：临时重定向，实际效果同302。

### HTTP 请求的特点？

灵活可扩展：语意上自由，传输形式多样。

可靠传输：基于 TCP/IP，继承了其特性。

请求-应答形式：一发一收，有来有回。

无状态：通信过程的上下文信息是独立、无关的。

### HTTP 的缺点？

无状态：长连接时，HTTP 不会保存大量的上下文信息，造成传输大量重复信息。

明文传输：请求/响应头不使用二进制数据，而是文本形式。

队头阻塞：长连接时，共用一个 TCP 连接，同时刻只能处理一个请求，当前请求耗时过长时，其他请求会造成阻塞。

### HTTP 的 keep-alive（持久连接）是干什么的？

- HTTP协议采用“请求-应答”模式，当使用非 Keep-Alive 模式时，每次发送请求时，客户端和服务器都要新建一个连接，完成之后就断开连接。
- 当使用 Keep-Alive 模式时，Keep-Alive 功能使客户端到服务器端的连接持续有效，当出现对服务器的后继请求时，Keep-Alive 功能避免了建立或者重新建立连接。

### 为什么有了 HTTP 还要 HTTPS？:star2:

- HTTP 协议存在的问题：
  - 通信内容使用明文没有加密
  - 无法保证报文的完整性，内容可能被篡改
  - 不验证通信方之间的身份，有可能遭遇伪装
- HTTPS 的优势就是解决了上述三个问题：
  - 数据隐私：通信内容经过加密
  - 数据完整：内容传输经过完整性校验
  - 身份认证：第三方无法伪造身份

## HTTPS 如何保证安全、原理？:star2:

- HTTPS 只是 HTTP 通信接口部分用 SSL 和 TLS 协议代替。
- SSL 和 TLS 的功能主要依赖于三类基本算法：
  - 非对称加密：实现身份验证和密钥协商。
  - 对称加密：采用协商密钥对通信内容进行加密。
  - 散列函数：验证信息完整性。

## HTTP2、HTTP1.X 有什么功能？:star2:

- 1.1功能：
  - 长链接：使用 keep-alive 进行复用
  - 断点续传功能
  - cache 缓存功能
- 2.0功能：只能用在 HTTPS 的基础上。
  - 多路复用：只会创建一个 TCP 连接，减少 TCP 握手带来的损耗，同时不需要等待上一个请求的响应。
  - 二进制分帧：应用层和传输层之间。
  - 头部压缩：使用 HPACK 算法来压缩头部。
  - 服务端推送：当客户端请求某个资源时，服务器知道他可能需要另外的资源，提前推送过去。
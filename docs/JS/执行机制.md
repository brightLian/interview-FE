# 执行机制

### var、let、const 的区别？:star2:

- var
  - 作用域为该语句所在的区域内
  - 存在变量提升现象（在变量声明语句之前可以使用这个变量，只不过为 undefined）
  - 变量可以重复声明，以后声明的变量为准
- let
  - 作用域为该语句所在的代码块内
  - 不存在变量提升
  - 变量不可以重复声明
- const
  - 作用域为该语句所在的代码块内
  - 不存在变量提升
  - 变量不可以重复声明，且在变量声明时必须直接赋值，只声明不赋值会报错
  - 变量一旦声明就不能修改，试图去修改 const 声明的常量就会报错（对象可以增删属性，只要地址不被改变即可）

### 变量提升和函数提升:star2:

- 变量提升：
  - 定义：JS 引擎在代码执行前会先解析代码，获取所有 var 声明的变量并将定义语句一次提前到作用域的顶端，但是赋值语句还是在原本位置。然后在一行一行的执行代码
  - 表现：表现为变量的使用可以在变量声明之前，只不过值为 undefined
- 函数提升：
  - 定义：JS 在解析代码阶段，会将所有的函数声明依次提升到作用域的最顶端，且没有先后顺序。
  - 表现：函数的使用语句可以在函数定义的语句后面

注意：函数提升的优先级高于变量提升

### 函数声明和函数表达式

- 写法不同：
  - 函数声明： function fn() {...}
  - 函数表达式：const fn1 = function() {...}
- 函数声明会在代码执行前进行函数提升，函数表达式不存在函数提升，但是通过 var 声明的函数有变量提升。

### 什么是 JavaScript 预解析？

我们大致可以把 JS 代码的运行分为两个阶段：预解析阶段和执行阶段。      
在预解析阶段，JS 解释器会把使用 var 声明的变量、函数提升到作用域的最顶端，同名的变量或者函数后者会覆盖前者，同时会创建执行上下文。

### 一段 JavaScript 代码是如何执行的？

JS 代码的执行分为两个阶段：预解析阶段和执行阶段。

- 预解析阶段：变量和函数提升、创建可执行环境的上下文。
- 执行阶段：按照可执行的代码顺序先后执行、通过栈管理多个执行上下文、出现报错后面代码不会再执行。

### JavaScript 的运行机制？

1. 从前到后一行一行执行
2. 如果某一行执行报错，则停止后面代码的执行
3. 先把同步代码执行完，再执行异步代码（[同步异步相关可看](/JS/同步异步.html/))

